# AI Chart Analyzer (Telegram Web App)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–π–¥–µ—Ä–æ–≤: –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ —Ñ–æ—Ç–æ/—Å–∫—Ä–∏–Ω –≥—Ä–∞—Ñ–∏–∫–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Gemini –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª LONG/SHORT/NEUTRAL —Å –∫—Ä–∞—Ç–∫–∏–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º.

## –°—Ç–µ–∫
- Frontend: React + Vite + TailwindCSS (–≥–æ—Ç–æ–≤–æ –¥–ª—è Telegram Web App).
- Backend: FastAPI (async) + Google Gemini (`gemini-1.5-flash`).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
/
‚îú‚îÄ api/        # FastAPI
‚îú‚îÄ client/     # React + Vite + Tailwind
‚îî‚îÄ README.md
```

## –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ Telegram Web App (Mini App)
- **–®–∞–≥ 1 ‚Äî —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞**: –≤ Telegram –æ—Ç–∫—Ä–æ–π `@BotFather` ‚Üí `/newbot` ‚Üí –ø–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω (–æ–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—ã –±—É–¥–µ—à—å –¥–µ–ª–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ª–æ–≥–∏–∫—É –±–æ—Ç–∞; –¥–ª—è WebApp –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–Ω–æ–ø–∫—É/–º–µ–Ω—é).
- **–®–∞–≥ 2 ‚Äî –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Ñ—Ä–æ–Ω—Ç (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ HTTPS)**:
  - –ë—ã—Å—Ç—Ä–æ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ: Vercel / Netlify / Cloudflare Pages.
  - –ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∏—à—å URL –≤–∏–¥–∞ `https://your-app.vercel.app`.
- **–®–∞–≥ 3 ‚Äî –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å API (FastAPI)**:
  - Render / Railway / Fly.io / VPS.
  - –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ –≤—ã—Å—Ç–∞–≤—å:
    - `GEMINI_API_KEY=...`
    - `ALLOWED_ORIGINS=https://your-app.vercel.app` (–∏–ª–∏ —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- **–®–∞–≥ 4 ‚Äî —Å–≤—è–∑–∞—Ç—å WebApp —Å –±–æ—Ç–æ–º**:
  - –í `@BotFather` ‚Üí `/setmenubutton` ‚Üí –≤—ã–±–µ—Ä–∏ –±–æ—Ç–∞ ‚Üí **Web App** ‚Üí —É–∫–∞–∂–∏ HTTPS URL —Ñ—Ä–æ–Ω—Ç–∞.
  - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –æ—Ç–¥–∞–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É WebApp —á–µ—Ä–µ–∑ Bot API (inline keyboard —Å `web_app`).
- **–®–∞–≥ 5 ‚Äî —É–∫–∞–∑–∞—Ç—å API URL –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ**:
  - –í `client` —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:
    - `VITE_API_URL=https://your-api-host.com`
  - –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ —Ñ—Ä–æ–Ω—Ç (–Ω–∞ Vercel/Netlify —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—É—à–µ).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gemini API Key (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∏—Ä)
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://aistudio.google.com/apikey –∏ –Ω–∞–∂–º–∏—Ç–µ **Create API key** (Google –∞–∫–∫–∞—É–Ω—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω).
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á.
3. –í `/api` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:
   ```
   GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á
   ALLOWED_ORIGINS=http://localhost:5173
   ```
   –ù–∞ –ø—Ä–æ–¥–µ –∑–∞–º–µ–Ω–∏—Ç–µ `ALLOWED_ORIGINS` –Ω–∞ –¥–æ–º–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

## –ó–∞–ø—É—Å–∫ backend (FastAPI)
```bash
cd api
python -m venv .venv
. .venv/Scripts/activate       # PowerShell: .\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ python-dotenv
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```
–≠–Ω–¥–ø–æ–∏–Ω—Ç: `POST http://localhost:8000/analyze` (multipart form-data, –ø–æ–ª–µ `file`).

## –ó–∞–ø—É—Å–∫ frontend (Vite)
```bash
cd client
npm install
npm run dev -- --host --port 5173
```
Env –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ `client/.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `client/env.example`:
```
VITE_API_URL=http://localhost:8000
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ—Ä–æ–Ω—Ç —Å—Ç—É—á–∏—Ç—Å—è –Ω–∞ `http://localhost:8000`.

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–æ—Ç–æ–∫
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ (–∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å –∫–∞–º–µ—Ä—É —á–µ—Ä–µ–∑ `capture="environment"`).
2. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –∫–Ω–æ–ø–∫–∞ ¬´–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å¬ª.
3. –ü–æ–∫–∞ –∑–∞–ø—Ä–æ—Å –≤ —Ä–∞–±–æ—Ç–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏–Ω–Ω–µ—Ä.
4. –û—Ç–≤–µ—Ç: –∫—Ä—É–ø–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç (üü¢ LONG / üî¥ SHORT / üü° NEUTRAL) –∏ –±–ª–æ–∫ ¬´–ê–Ω–∞–ª–∏–∑¬ª —Å —Ç–µ–∫—Å—Ç–æ–º Gemini.
5. –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞¬ª.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ù–µ—á—ë—Ç–∫–∏–π/–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª ‚Üí 400 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
- –ù–µ—Ç API –∫–ª—é—á–∞ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç Gemini ‚Üí 502 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º.
- CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `ALLOWED_ORIGINS`.

## –ü—Ä–æ–¥
- –°–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç: `cd client && npm run build` ‚Üí `dist/`.
- –†–∞–∑–¥–∞–π—Ç–µ `dist` —á–µ—Ä–µ–∑ –ª—é–±–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ (–∏–ª–∏ Nginx), —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `VITE_API_URL`.
- –ë—ç–∫–µ–Ω–¥ –º–æ–∂–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã.
